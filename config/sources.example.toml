[global]
base_data_dir = "/Users/bakemocho/Audio/tiktok/english"
cookies_from_browser = "chrome"
video_format = "bv*+ba/best"
sub_langs = "en.*,en,und"
sub_format = "vtt/ttml/best"
sleep_interval = 2
max_sleep_interval = 6
retry_sleep = 5
playlist_end = 200
break_on_existing = false
break_per_input = false
lazy_playlist = false

# Older-post backfill (reverse incremental)
backfill_enabled = false
# backfill_start defaults to playlist_end + 1 when unset
# backfill_start = 201
backfill_window = 200
backfill_windows_per_run = 1

# ASR (subtitles from speech recognition)
asr_enabled = false
asr_max_per_run = 20
asr_timeout_sec = 0
asr_prefer_exts = ["srt", "vtt"]
# asr_command = [
#   "/Users/bakemocho/gitwork_bk/vseg/.venv/bin/python",
#   "-m", "avseg.main_transcribe",
#   "--with-subtitles",
#   "--language", "en",
#   "--output-dir", "{work_dir}",
#   "{input_path}",
# ]
ledger_db = "data/master_ledger.sqlite"
ledger_csv = "data/master_ledger.csv"

[[sources]]
id = "storiesofcz"
platform = "tiktok"
url = "https://www.tiktok.com/@storiesofcz"
enabled = true

# Existing on-disk layout (no migration needed):
data_dir = "/Users/bakemocho/Audio/tiktok/english/storiesofcz"
media_dir = "storiesofcz"
subs_dir = "storiesofcz_subs"
meta_dir = "storiesofcz_meta"
media_archive = "storiesofcz.archive.txt"
subs_archive = "storiesofcz_subs.archive.txt"
urls_file = "storiesofcz.urls.txt"
video_id_regex = "_(\\d{19})_"
asr_dir = "storiesofcz_asr"

# Optional overrides:
# handle = "storiesofcz"
# video_url_template = "https://www.tiktok.com/@{handle}/video/{id}"
# break_on_existing = true
# break_per_input = true
# lazy_playlist = true
# playlist_end = 300
# backfill_enabled = true
# backfill_start = 301
# backfill_window = 300
# backfill_windows_per_run = 2
# asr_enabled = true
